import{r as E,u as O,a as N,b as w,j as e,C as a,c as o,d as x,S as T,B as n,e as b,f as r,g as h,h as C,i as A,k as H,l as u,m as k,q as $}from"./index-CuqwJvRe.js";function K(){var f,p,v;const[S,j]=E.useState(!1),{toast:g}=O(),{data:R=[],isLoading:B}=N({queryKey:["/api/daily-tasks"]}),{data:i}=N({queryKey:["/api/user-preferences"]}),d=R.filter(s=>s.scheduledTime),l=w({mutationFn:async s=>await k("PUT","/api/user-preferences",s),onSuccess:()=>{$.invalidateQueries({queryKey:["/api/user-preferences"]}),g({title:"Settings Updated",description:"Your reminder preferences have been saved."})}}),c=w({mutationFn:async()=>await k("POST","/api/test-reminder"),onSuccess:()=>{g({title:"Test Reminder Sent",description:"Check your notifications for the test reminder."})}}),M=s=>{const[t,m]=s.split(":"),y=parseInt(t),q=y>=12?"PM":"AM";return`${y%12||12}:${m} ${q}`},P=s=>{if(s.isCompleted)return e.jsx(u,{variant:"default",className:"bg-green-100 text-green-800",children:"Completed"});const m=new Date().toTimeString().slice(0,5);return s.scheduledTime<=m?e.jsx(u,{variant:"destructive",children:"Overdue"}):e.jsx(u,{variant:"secondary",children:"Pending"})};return B?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):S?e.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:e.jsxs(a,{children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Reminder Settings",e.jsx(n,{variant:"outline",size:"sm",onClick:()=>j(!1),className:"ml-auto",children:"Back to Reminders"})]}),e.jsx(b,{children:"Configure how and when you receive task reminders"})]}),e.jsxs(r,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Reminder Settings"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Enable Task Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications when tasks are due"})]}),e.jsx(h,{checked:((f=i==null?void 0:i.reminderTiming)==null?void 0:f.taskReminders)!==!1,onCheckedChange:s=>l.mutate({reminderTiming:{...i==null?void 0:i.reminderTiming,taskReminders:s?5:!1}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Overdue Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified if tasks become overdue"})]}),e.jsx(h,{checked:((p=i==null?void 0:i.reminderTiming)==null?void 0:p.overdueReminders)!==!1,onCheckedChange:s=>l.mutate({reminderTiming:{...i==null?void 0:i.reminderTiming,overdueReminders:s}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Browser Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Show notifications in your browser"})]}),e.jsx(h,{checked:((v=i==null?void 0:i.notificationSettings)==null?void 0:v.pushEnabled)!==!1,onCheckedChange:s=>l.mutate({notificationSettings:{...i==null?void 0:i.notificationSettings,pushEnabled:s}})})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(n,{onClick:()=>c.mutate(),disabled:c.isPending,variant:"outline",children:c.isPending?"Sending...":"Test Reminder"})})]})]})}):e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Task Reminders"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your scheduled tasks and reminder preferences"})]}),e.jsxs(n,{onClick:()=>j(!0),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Settings"]})]}),d.length===0?e.jsx(a,{children:e.jsxs(r,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(C,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Scheduled Tasks"}),e.jsx("p",{className:"text-gray-600 text-center mb-4",children:"You don't have any tasks with specific times set. Add scheduled times to your tasks to receive reminders."}),e.jsx(n,{variant:"outline",onClick:()=>window.location.href="/daily-tasks",children:"Go to Daily Tasks"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(a,{children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Today's Scheduled Tasks (",d.length,")"]}),e.jsx(b,{children:"Tasks with specific times will automatically send reminders"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-3",children:d.sort((s,t)=>s.scheduledTime.localeCompare(t.scheduledTime)).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.isCompleted?e.jsx(A,{className:"h-5 w-5 text-green-500"}):e.jsx(H,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${s.isCompleted?"line-through text-gray-500":""}`,children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:M(s.scheduledTime)}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.estimatedMinutes," min"]}),s.pointValue>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.pointValue," points"]})]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.category.replace("_"," ")})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:P(s)})]},s.id))})})]}),e.jsxs(a,{children:[e.jsx(o,{children:e.jsx(x,{children:"How Reminders Work"})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"On-Time Reminders:"})," You'll get a notification exactly when your task is scheduled"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Overdue Alerts:"})," If a task isn't completed 30 minutes after its scheduled time, you'll get a gentle reminder"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Smart Timing:"})," Reminders are sent only once per day to avoid notification spam"]})]})]})})]})]})]})}export{K as default};
